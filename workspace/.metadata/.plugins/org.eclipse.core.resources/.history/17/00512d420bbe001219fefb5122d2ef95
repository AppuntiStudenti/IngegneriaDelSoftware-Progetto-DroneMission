package it.unibo.droneMission.tests;

import it.unibo.droneMission.gauge.GaugeValueInt;
import it.unibo.droneMission.gauge.Speedometer;
import it.unibo.droneMission.interfaces.IGaugeValueInt;
import junit.framework.TestCase;

public class SpeedometerTest extends TestCase {
	protected Speedometer sp;
	
	//variabili test
	public GaugeValueInt val=new GaugeValueInt(60);

	public SpeedometerTest(String arg0){
		super(arg0);
	}
	
	protected void setUp() throws Exception {
		sp = new Speedometer();
	}

	protected void tearDown() throws Exception {
		super.tearDown();
	}
	
	//invariant speedometer
	protected boolean invariant(Speedometer O){
		return((((O.getVal().valAsInt()>=Speedometer.MIN) && (O.getVal().valAsInt()<=Speedometer.MAX))));
	}

	public void testOnCreate(){
		assertTrue(sp.getVal().valAsInt()==Speedometer.INIT); 
	}
	
	public void testOnStartMission(){
		startMission();
		assertTrue("testOnCreate",(invariant(sp))); 
	}
	
	private void startMission() {
		// TODO Auto-generated method stub
		sp.setVal(new GaugeValueInt(60));
	}
	
	public void incToLimit(){
		try{
			while(sp.getVal().valAsInt()+Speedometer.DS<=Speedometer.MAX)
				sp.setVal(new GaugeValueInt(sp.getVal().valAsInt()+Speedometer.DS));
			assertTrue("incToLimit", invariant(sp));
		} catch (Exception e) {
			fail("incToLimit"+ e.getMessage());
		}
	}
	
	//Set value 
	public void testUpdate(){
		try {
			sp.setVal(val);
			assertTrue("testInc",(invariant(sp)));
		} catch (Exception e) {
			fail("testInc" + e.getMessage());
		}
	}
	
	//max limit
	
	public void testMaxLimit(){
		try{
			incToLimit();
			sp.setVal(new GaugeValueInt(sp.getVal().valAsInt()+Speedometer.DS));
			assertTrue("testMaxLimit",(invariant(sp)));
		}
		catch (Exception e) {
			fail("TestMaxLimit"+ e.getMessage());
		}
	}
}

